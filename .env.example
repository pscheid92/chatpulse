# Application Environment
APP_ENV=development
PORT=8080

# Database
# Pool settings can be configured via query params: pool_min_conns, pool_max_conns,
# pool_max_conn_idle_time, pool_health_check_period, connect_timeout
DATABASE_URL=postgres://twitchuser:twitchpass@localhost:5432/twitchdb?sslmode=disable

# Twitch OAuth
TWITCH_CLIENT_ID=your_twitch_client_id_here
TWITCH_CLIENT_SECRET=your_twitch_client_secret_here
TWITCH_REDIRECT_URI=http://localhost:8080/auth/callback

# Session Secret (generate a random string)
SESSION_SECRET=your_random_session_secret_here

# Webhook (required for receiving chat messages)
# Use ngrok for local dev: ngrok http 8080, then set the URL below
WEBHOOK_CALLBACK_URL=https://your-ngrok-subdomain.ngrok-free.app/webhooks/eventsub
WEBHOOK_SECRET=your_webhook_secret_at_least_10_chars

# Bot Account (required when WEBHOOK_CALLBACK_URL is set)
# The Twitch user ID of the dedicated bot account that reads chat
BOT_USER_ID=

# Logging Configuration
# LOG_LEVEL: debug, info, warn, error (default: info)
# LOG_FORMAT: text, json (default: text, use json for production)
LOG_LEVEL=info
LOG_FORMAT=text

# WebSocket Connection Limits
# Protect against DoS attacks and resource exhaustion
MAX_WEBSOCKET_CONNECTIONS=10000  # Maximum total connections per instance
MAX_CONNECTIONS_PER_IP=100       # Maximum connections from a single IP
CONNECTION_RATE_PER_IP=10        # Maximum new connections per second per IP
CONNECTION_RATE_BURST=20         # Burst allowance for connection rate limiter

SESSION_MAX_AGE=168h                    # HTTP session cookie expiry (7 days)
